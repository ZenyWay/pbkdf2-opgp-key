(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var src_1=require("../../src"),opgp_service_1=require("opgp-service"),debug=require("debug");debug.enable("example:*");var opgp=opgp_service_1.default(),getPbkdf2OpgpKey=src_1.default(opgp,{pbkdf2:{salt:32,iterations:16384,length:64}});debug("example:")("generate key...");var key=getPbkdf2OpgpKey({user:"j.doe@example.com",passphrase:"secret passphrase"}).then(debug("example:key:"));
},{"../../src":2,"debug":undefined,"opgp-service":undefined}],2:[function(require,module,exports){
"use strict";function isValidOpgpService(e){return!!e&&["generateKey","unlock"].every(function(t){return utils_1.isFunction(e[t])})}function isValidCredentials(e){return!!e&&utils_1.isString(e.user)&&utils_1.isString(e.passphrase)}var utils_1=require("./utils"),tslib_1=require("tslib"),KEY_SIZE_DEFAULT=2048,getPbkdf2OpgpKeyFactory=function(e,t){if(!isValidOpgpService(e))throw new TypeError("invalid argument");var n=tslib_1.__assign({},{size:KEY_SIZE_DEFAULT},t),r=utils_1.isFunction(n.getkdf)?n.getkdf:require("pbkdf2sha512").default,i=tslib_1.__assign({},n.pbkdf2),s=n.size,u=!n.locked;return function(t){return isValidCredentials(t)?Pbkdf2OpgpKeyClass.getInstance(e,r,i,s,u,t):Promise.reject(new TypeError("invalid argument"))}},Pbkdf2OpgpKeyClass=function(){function e(e,t,n,r){this.getPbkdf2=e,this.opgp=t,this.key=n,this.pbkdf2=r}return e.getInstance=function(t,n,r,i,s,u){var o=n(r),a=o(u.passphrase).then(function(r){var o=r.value,a=r.spec;return Promise.resolve(t.generateKey(u.user,{passphrase:o,size:i,unlocked:s})).then(function(r){return new e(n,t,r,a)})});return e.wrapInstance(a)},e.prototype.unlock=function(t){var n=this,r=this.getPbkdf2(this.pbkdf2);return r(t).then(function(e){return Promise.resolve(n.opgp.unlock(n.key,e.value))}).then(function(t){return new e(n.getPbkdf2,n.opgp,t,n.pbkdf2)})},e.wrapInstance=function(t){return t.then(function(t){return{key:t.key,pbkdf2:t.pbkdf2,unlock:function(n){return utils_1.isString(n)?e.wrapInstance(t.unlock(n)):Promise.reject(new TypeError("invalid argument"))}}})},e}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=getPbkdf2OpgpKeyFactory;
},{"./utils":3,"pbkdf2sha512":undefined,"tslib":undefined}],3:[function(require,module,exports){
"use strict";function isString(n){return"string"==typeof(n&&n.valueOf())}function isFunction(n){return"function"==typeof n}exports.isString=isString,exports.isFunction=isFunction;
},{}]},{},[1]);
